<!DOCTYPE html>
<!--
 Copyright 2024 Google LLC
 SPDX-License-Identifier: Apache-2.0
-->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>IE Page Transitions (SPA)</title>

    <!-- Page Styles -->
    <link rel="stylesheet" href="/shared/styles.css">

    <!-- Randomize page looks for demonstration purposes -->
    <script type="module" blocking="render">
        import { randomize } from '/shared/randomize.module.js';
        randomize();
    </script>

    <!-- (Optional) Enable IE Page Transitions Reveal Effect on first load -->
    <link rel="stylesheet" href="/dist/ie-page-transitions.css">
    <script type="module" blocking="render">
        import { init } from '/dist/ie-page-transitions.spa.js';

        if (!window.navigation || (window.navigation.activation.navigationType !== 'reload')) {
            init();
        }
    </script>

    <!-- IE Page Transitions (SPA) Usage Example -->
    <script type="module">
        import { startViewTransition } from '/dist/ie-page-transitions.spa.js';
        import { randomize } from '/shared/randomize.module.js';

        // Rasdf
        document.querySelector(`form`).addEventListener('submit', (e) => {
            e.preventDefault();

            const chosenEntryEffect = document.querySelector('select[name="Page-Enter"]').value;
            if (chosenEntryEffect !== '') {
                document.querySelector('meta[http-equiv="Page-Enter"]').setAttribute('content', `revealTrans(Duration=0.5,Transition=${chosenEntryEffect})`);
            } else {
                document.querySelector('meta[http-equiv="Page-Enter"]').setAttribute('content', '');
            }

            const chosenExitEffect = document.querySelector('select[name="Page-Exit"]').value;
            if (chosenExitEffect !== '') {
                document.querySelector('meta[http-equiv="Page-Exit"]').setAttribute('content', `revealTrans(Duration=0.5,Transition=${chosenExitEffect})`);
            } else {
                document.querySelector('meta[http-equiv="Page-Exit"]').setAttribute('content', '');
            }

            startViewTransition(randomize);
        });
    </script>

    <!-- Configure IE Page Transitions Effect -->
    <meta http-equiv="Page-Enter" content="revealTrans(Duration=0.5,Transition=23)">
    <meta http-equiv="Page-Exit" content="revealTrans(Duration=0.5,Transition=23)">
</head>
<body>
    <header>
        <h1>IE Page Transitions (SPA)</h1>
        <p><em>Bringing back Internet Explorer’s Page Transitions thanks to the View Transition API</em></p>
        <p><a href="../">&larr; To Index</a></p>
    </header> 
    <main>
        <h2>Choose your effects</h2>

        <p>Use this form to choose the effects to run. When hitting Go, the page will navigate to itself. When choosing “none”, the default View Transition effect (a fade) will be used.</p>

        <form action="">
            <div class="row">
                <label for="exit-effect">Exit Effect (current view)</label>
                <select name="Page-Exit" id="exit-effect">
                    <option value="">(none)</option>
                    <option value="0">0 - Box in</option>
                    <option value="1">1 – Box out</option>
                    <option value="2">2 – Circle in</option>
                    <option value="3">3 – Circle out</option>
                    <option value="4">4 – Wipe up</option>
                    <option value="5">5 – Wipe down</option>
                    <option value="6">6 – Wipe right</option>
                    <option value="7">7 – Wipe left</option>
                    <option value="8">8 – Vertical blinds</option>
                    <option value="9">9 – Horizontal blinds</option>
                    <option value="10">10 – Checkerboard across (❌)</option>
                    <option value="11">11 – Checkerboard down (❌)</option>
                    <option value="12">12 – Random dissolve (❌)</option>
                    <option value="13">13 – Split vertical in</option>
                    <option value="14">14 – Split vertical out</option>
                    <option value="15">15 – Split horizontal in (❌)</option>
                    <option value="16">16 – Split horizontal out (❌)</option>
                    <option value="17">17 – Strips left down</option>
                    <option value="18">18 – Strips left up</option>
                    <option value="19">19 – Strips right down</option>
                    <option value="20">20 – Strips right up</option>
                    <option value="21">21 – Random bars horizontal (❌)</option>
                    <option value="22">22 – Random bars vertical (❌)</option>
                    <option value="23" selected>23 – Random</option>
                </select>
            </div>
            <div class="row">
                <label for="entry-effect">Entry Effect (next view)</label>
                <select name="Page-Enter" id="entry-effect">
                    <option value="">(none)</option>
                    <option value="0">0 - Box in</option>
                    <option value="1">1 – Box out</option>
                    <option value="2">2 – Circle in</option>
                    <option value="3">3 – Circle out</option>
                    <option value="4">4 – Wipe up</option>
                    <option value="5">5 – Wipe down</option>
                    <option value="6">6 – Wipe right</option>
                    <option value="7">7 – Wipe left</option>
                    <option value="8">8 – Vertical blinds</option>
                    <option value="9">9 – Horizontal blinds</option>
                    <option value="10">10 – Checkerboard across (❌)</option>
                    <option value="11">11 – Checkerboard down (❌)</option>
                    <option value="12">12 – Random dissolve (❌)</option>
                    <option value="13">13 – Split vertical in</option>
                    <option value="14">14 – Split vertical out</option>
                    <option value="15">15 – Split horizontal in (❌)</option>
                    <option value="16">16 – Split horizontal out (❌)</option>
                    <option value="17">17 – Strips left down</option>
                    <option value="18">18 – Strips left up</option>
                    <option value="19">19 – Strips right down</option>
                    <option value="20">20 – Strips right up</option>
                    <option value="21">21 – Random bars horizontal (❌)</option>
                    <option value="22">22 – Random bars vertical (❌)</option>
                    <option value="23" selected>23 – Random</option>
                </select>
            </div>
            <div class="row">
                <button>Go!</button>
            </div>
        </form>
    </main>
    <footer>
        <p>Built by <a href="https://www.bram.us">Bramus</a>. Just for funzies.</p>
    </footer>
</body>
</html>